
Labels and selector
====================
![image](https://user-images.githubusercontent.com/53966749/200168456-039f4932-15f0-4444-a216-30df008235f1.png)
![image](https://user-images.githubusercontent.com/53966749/200168478-c5091e0f-d30c-4e61-a9d3-8892243b9405.png)
![image](https://user-images.githubusercontent.com/53966749/200168573-32a1f5a3-7f4d-4a29-9206-3a89f1d05a21.png)

```
sles15sp3:~ # kubectl run nginx --image=nginx
pod/nginx created

sles15sp3:~ # kubectl run nginx2 --image=nginx
pod/nginx2 created

sles15sp3:~ # kubectl get pods
NAME     READY   STATUS    RESTARTS   AGE
nginx    1/1     Running   0          4m39s
nginx2   1/1     Running   0          3s


sles15sp3:~ # kubectl label pods nginx env=dev
pod/nginx labeled

sles15sp3:~ # kubectl label pods nginx2 env=prod
pod/nginx2 labeled

sles15sp3:~ # kubectl get pods --show-labels
NAME     READY   STATUS    RESTARTS   AGE     LABELS
nginx    1/1     Running   0          5m57s   env=dev,run=nginx
nginx2   1/1     Running   0          81s     env=prod,run=nginx2

sles15sp3:~ # kubectl get pods -l env=dev
NAME    READY   STATUS    RESTARTS   AGE
nginx   1/1     Running   0          6m24s

sles15sp3:~ # kubectl get pods -l env=prod
NAME     READY   STATUS    RESTARTS   AGE
nginx2   1/1     Running   0          118s
sles15sp3:~ #

sles15sp3:~ # kubectl get pods -l env!=prod
NAME    READY   STATUS    RESTARTS   AGE
nginx   1/1     Running   0          6m50s
sles15sp3:~ #

sles15sp3:~ # cat 1.yaml
------------------------
apiVersion: v1
kind: Pod
metadata:
     name: nginxwebserver
     labels:
       env: prod
       app: nginx
spec:
  containers:
     -    image: nginx
          name: democontainer
          ports:
            - containerPort: 8080
sles15sp3:~ # kubectl apply -f 1.yaml
pod/nginxwebserver created
sles15sp3:~ #
sles15sp3:~ # kubectl get pods --show-labels
NAME             READY   STATUS    RESTARTS   AGE   LABELS
nginxwebserver   1/1     Running   0          11s   app=nginx,env=prod

```
Replicaset
=========
![image](https://user-images.githubusercontent.com/53966749/200169525-c1ce631f-7f31-4dce-b2f2-c7ed7c82b7e2.png)
![image](https://user-images.githubusercontent.com/53966749/200169560-6e2db183-981b-45e5-926e-01f9b1ffaf79.png)
```
sles15sp3:~ # cat replicaset.yaml
apiVersion: apps/v1
kind: ReplicaSet
metadata:
  name: kplabs-replicaset
spec:
  replicas: 5
  selector:
    matchLabels:
      tier: frontend
  template:
    metadata:
      labels:
        tier: frontend
    spec:
      containers:
      - name: php-redis
        image: nginx
---------------------------------------------------------------
Note: Here  template section similar to pod create section     |
---------------------------------------------------------------

sles15sp3:~ #  kubectl apply -f replicaset.yaml
replicaset.apps/kplabs-replicaset created
sles15sp3:~ #
sles15sp3:~ # kubectl get replicasets.apps
NAME                DESIRED   CURRENT   READY   AGE
kplabs-replicaset   5         5         5       17s
sles15sp3:~ # kubectl get pods
NAME                      READY   STATUS    RESTARTS   AGE
kplabs-replicaset-5krh8   1/1     Running   0          38s
kplabs-replicaset-ncfrs   1/1     Running   0          38s
kplabs-replicaset-rdhbl   1/1     Running   0          38s
kplabs-replicaset-txqtr   1/1     Running   0          38s
kplabs-replicaset-w8926   1/1     Running   0          38s
nginxwebserver            1/1     Running   0          8m31s
sles15sp3:~ # kubectl delete pod kplabs-replicaset-5krh8
pod "kplabs-replicaset-5krh8" deleted
sles15sp3:~ # kubectl get replicasets.apps
NAME                DESIRED   CURRENT   READY   AGE
kplabs-replicaset   5         5         5       66s
sles15sp3:~ # kubectl get pods
NAME                      READY   STATUS    RESTARTS   AGE
kplabs-replicaset-ncfrs   1/1     Running   0          71s
kplabs-replicaset-rdhbl   1/1     Running   0          71s
kplabs-replicaset-txqtr   1/1     Running   0          71s
kplabs-replicaset-w8926   1/1     Running   0          71s
kplabs-replicaset-xrvdt   1/1     Running   0          10s
nginxwebserver            1/1     Running   0          9m4s

sles15sp3:~ # kubectl delete replicasets.apps kplabs-replicaset
replicaset.apps "kplabs-replicaset" deleted
sles15sp3:~ # kubectl get pods


delete repicaset without deleting pods
---------------------------------------

sles15sp3:~ # kubectl get replicasets.apps
NAME                DESIRED   CURRENT   READY   AGE
kplabs-replicaset   5         5         5       15s

sles15sp3:~ # kubectl get pods
NAME                      READY   STATUS    RESTARTS   AGE
kplabs-replicaset-fpbx5   1/1     Running   0          27s
kplabs-replicaset-ssx9x   1/1     Running   0          27s
kplabs-replicaset-sv274   1/1     Running   0          27s
kplabs-replicaset-wttqw   1/1     Running   0          27s
kplabs-replicaset-xn4w4   1/1     Running   0          27s

sles15sp3:~ # kubectl delete replicasets.apps kplabs-replicaset --cascade=false
warning: --cascade=false is deprecated (boolean value) and can be replaced with --cascade=orphan.
replicaset.apps "kplabs-replicaset" deleted

sles15sp3:~ # kubectl get pods
NAME                      READY   STATUS    RESTARTS   AGE
kplabs-replicaset-fpbx5   1/1     Running   0          71s
kplabs-replicaset-ssx9x   1/1     Running   0          71s
kplabs-replicaset-sv274   1/1     Running   0          71s
kplabs-replicaset-wttqw   1/1     Running   0          71s
kplabs-replicaset-xn4w4   1/1     Running   0          71s

```

