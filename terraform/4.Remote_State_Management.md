Integration with GIT for team management
-----------------------------------------

![image](https://user-images.githubusercontent.com/53966749/208822258-88bb6d52-5c6d-49eb-bb84-e415edde3b05.png)

```
providers.tf
---------------
provider "aws" {
  region = "us-west-1"
  access_key = "YOUR-ACCESS-KEY"
  secret_key = "YOUR-SECRET-KEY"
}

rds.tf
------
resource "aws_db_instance" "default" {
  allocated_storage    = 5
  storage_type         = "gp2"
  engine               = "mysql"
  engine_version       = "5.7"
  instance_class       = "db.t2.micro"
  name                 = "mydb"
  username             = "foo"
  password             = file("../rds_pass.txt")
  parameter_group_name = "default.mysql5.7"
  skip_final_snapshot = "true"
}

rds_pass.txt
------------
mysecretpassword505

```

Remote state management with terraform
--------------------------------------

![image](https://user-images.githubusercontent.com/53966749/208842366-ef2beb28-b73d-446a-8708-7044bc9a6737.png)

![image](https://user-images.githubusercontent.com/53966749/208842543-b64bf8aa-bfab-4ab1-8b19-58c028462b6e.png)

```
backend.tf
---------
terraform {
  backend "s3" {
    bucket = "ramakant-terraform-backend"
    key    = "network/terraform.tfstate"
    region = "us-east-1"
    access_key = "fe"
    secret_key = "+S/"
  }
}

eip.tf
--------
resource "aws_eip" "lb" {
  vpc      = true
}


provider.tf
------------

provider "aws" {
  region     = "us-west-2"
  access_key = "rfef"
  secret_key = "SyoZl\nkKjxZy1Zc"

}


terraform init
---------------

PS C:\Users\rathram\\terraform\aws\terraform-remote-backend> terraform init

Initializing the backend...

Successfully configured the backend "s3"! Terraform will automatically
use this backend unless the backend configuration changes.

Initializing provider plugins...
- Finding latest version of hashicorp/aws...
- Installing hashicorp/aws v4.48.0...
- Installed hashicorp/aws v4.48.0 (signed by HashiCorp)

Terraform has created a lock file .terraform.lock.hcl to record the provider
selections it made above. Include this file in your version control repository
so that Terraform can guarantee to make the same selections by default when
you run "terraform init" in the future.

Terraform has been successfully initialized!

terraform plan
--------------
  # aws_eip.lb will be created
  + resource "aws_eip" "lb" {
      + allocation_id        = (known after apply)
      + association_id       = (known after apply)
      + carrier_ip           = (known after apply)
      + customer_owned_ip    = (known after apply)
      + domain               = (known after apply)
      + id                   = (known after apply)
      + instance             = (known after apply)
      + network_border_group = (known after apply)
      + network_interface    = (known after apply)
      + private_dns          = (known after apply)
      + private_ip           = (known after apply)
      + public_dns           = (known after apply)
      + public_ip            = (known after apply)
      + public_ipv4_pool     = (known after apply)
      + tags_all             = (known after apply)
      + vpc                  = true
    }
    
  terraform apply
  ---------------
  
  Terraform will perform the following actions:

  # aws_eip.lb will be created
  + resource "aws_eip" "lb" {
      + allocation_id        = (known after apply)
      + association_id       = (known after apply)
      + carrier_ip           = (known after apply)
      + customer_owned_ip    = (known after apply)
      + domain               = (known after apply)
      + id                   = (known after apply)
      + instance             = (known after apply)
      + network_border_group = (known after apply)
      + network_interface    = (known after apply)
      + private_dns          = (known after apply)
      + private_ip           = (known after apply)
      + public_dns           = (known after apply)
      + public_ip            = (known after apply)
      + public_ipv4_pool     = (known after apply)
      + tags_all             = (known after apply)
      + vpc                  = true
    }

Plan: 1 to add, 0 to change, 0 to destroy.

Do you want to perform these actions?
  Terraform will perform the actions described above.
  Only 'yes' will be accepted to approve.

  Enter a value: yes

aws_eip.lb: Creating...
aws_eip.lb: Creation complete after 4s [id=eipalloc-0f9c868bd7d663fea]

Apply complete! Resources: 1 added, 0 changed, 0 destroyed.


```

![image](https://user-images.githubusercontent.com/53966749/208846145-99fd7caa-afc7-46cc-9839-c95f4b55f036.png)
![image](https://user-images.githubusercontent.com/53966749/208846257-9bc212b7-2e92-47d4-bc33-03f6e3f5e467.png)


Terraform state locking
----------------------

![image](https://user-images.githubusercontent.com/53966749/208846842-0c360577-4252-4bcc-9b38-5253533dde90.png)

from windows-1
---------------
![image](https://user-images.githubusercontent.com/53966749/208847120-7e743d64-68fd-4ccf-ae1d-2d39d772fd1f.png)

same time run in second windoes

![image](https://user-images.githubusercontent.com/53966749/208847194-346986f0-3084-4022-a88b-492f9b9d87f0.png)


for s3 state lock
-----------------

![image](https://user-images.githubusercontent.com/53966749/208849127-fe924f3f-0596-4c31-9884-909c60ac6a82.png)

![image](https://user-images.githubusercontent.com/53966749/208849292-cfdefafe-e560-4a53-8ef6-7d2db63ecac9.png)

![image](https://user-images.githubusercontent.com/53966749/208849605-195c31b6-9fbc-4a46-83dc-80b578126e92.png)

first windows
-------------
![image](https://user-images.githubusercontent.com/53966749/208849863-0a24ddb5-b5ab-4dfd-88c7-d80bc197c47e.png)

second windows
---------------
![image](https://user-images.githubusercontent.com/53966749/208849945-557a4492-69ee-4bb5-97da-92825c03acb9.png)

in web console

![image](https://user-images.githubusercontent.com/53966749/208850088-77cc8eca-760f-452e-8557-d5242a128c9d.png)

![image](https://user-images.githubusercontent.com/53966749/208850124-510117ed-118c-4687-8681-5e158cdd20bf.png)


```
s3-state-lock.tf
----------------

terraform {
  backend "s3" {
    bucket = "kplabs-terraform-backend"
    key    = "network/demo.tfstate"
    region = "us-east-1"
    dynamodb_table = "terraform-state-locking"
  }
}

resource "time_sleep" "wait_150_seconds" {

  create_duration = "150s"
}


```
