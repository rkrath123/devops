Understanding the attributes
============================

![image](https://user-images.githubusercontent.com/53966749/207589883-74f268bf-0951-484f-9c6c-00be8c08aac5.png)

![image](https://user-images.githubusercontent.com/53966749/207590009-d19e7198-a101-4f7b-a03d-00ea7a470064.png)

```

provider "aws" {
  region     = "us-west-2"
  access_key = "svwefwewevww"
  secret_key = "vsdfwefwefwef"
}

resource "aws_eip" "lb" {
  vpc      = true
}

output "eip" {
  value = aws_eip.lb
}

resource "aws_s3_bucket" "mys3" {
  bucket = "rkrath-attribute-demo-001"
}

output "mys3bucket" {
  value = aws_s3_bucket.mys3
}

terraform apply
--------------

Outputs:

eip = {
  "address" = tostring(null)
  "allocation_id" = "eipalloc-0a2ae27a55dc805ef"
  "associate_with_private_ip" = tostring(null)
  "association_id" = ""
  "carrier_ip" = ""
  "customer_owned_ip" = ""
  "customer_owned_ipv4_pool" = ""
  "domain" = "vpc"
  "id" = "eipalloc-0a2ae27a55dc805ef"
  "instance" = ""
  "network_border_group" = "us-west-2"
  "network_interface" = ""
  "private_dns" = tostring(null)
  "private_ip" = ""
  "public_dns" = "ec2-54-218-64-91.us-west-2.compute.amazonaws.com"
  "public_ip" = "54.218.64.91"
  "public_ipv4_pool" = "amazon"
  "tags" = tomap(null) /* of string */
  "tags_all" = tomap({})
  "timeouts" = null /* object */
  "vpc" = true
}
mys3bucket = {
  "acceleration_status" = ""
  "acl" = tostring(null)
  "arn" = "arn:aws:s3:::rkrath-attribute-demo-001"
  "bucket" = "rkrath-attribute-demo-001"
  "bucket_domain_name" = "rkrath-attribute-demo-001.s3.amazonaws.com"
  "bucket_prefix" = tostring(null)
  "bucket_regional_domain_name" = "rkrath-attribute-demo-001.s3.us-west-2.amazonaws.com"
  "cors_rule" = tolist([])
  "force_destroy" = false
  "grant" = toset([
    {
      "id" = "450484c4553b45e1e50cb00e8732e24440f1cf20afb20812279e1c872615dfb1"
      "permissions" = toset([
        "FULL_CONTROL",
      ])
      "type" = "CanonicalUser"
      "uri" = ""
    },
  ])
  "hosted_zone_id" = "Z3BJ6K6RIION7M"
  "id" = "rkrath-attribute-demo-001"
  "lifecycle_rule" = tolist([])
  "logging" = tolist([])
  "object_lock_configuration" = tolist([])
  "object_lock_enabled" = false
  "policy" = ""
  "region" = "us-west-2"
  "replication_configuration" = tolist([])
  "request_payer" = "BucketOwner"
  "server_side_encryption_configuration" = tolist([])
  "tags" = tomap(null) /* of string */
  "tags_all" = tomap({})
  "timeouts" = null /* object */
  "versioning" = tolist([
    {
      "enabled" = false
      "mfa_delete" = false
    },
  ])
  "website" = tolist([])
  "website_domain" = tostring(null)
  "website_endpoint" = tostring(null)
}



or 


resource "aws_eip" "lb" {
  vpc      = true
}

output "eip" {
  value = aws_eip.lb.public_ip
}

resource "aws_s3_bucket" "mys3" {
  bucket = "rkrath-attribute-demo-001"
}

output "mys3bucket" {
  value = aws_s3_bucket.mys3.bucket_domain_name
}


terrafor apply
------------

Apply complete! Resources: 2 added, 0 changed, 0 destroyed.

Outputs:

eip = "44.230.244.1"
mys3bucket = "rkrath-attribute-demo-001.s3.amazonaws.com"

terraform.tfstate
---------------

 "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "address": null,
            "allocation_id": "eipalloc-012b09c16750857a5",
            "associate_with_private_ip": null,
            "association_id": "",
            "carrier_ip": "",
            "customer_owned_ip": "",
            "customer_owned_ipv4_pool": "",
            "domain": "vpc",
            "id": "eipalloc-012b09c16750857a5",
            "instance": "",
            "network_border_group": "us-west-2",
            "network_interface": "",
            "private_dns": null,
            "private_ip": "",
            "public_dns": "ec2-44-230-244-1.us-west-2.compute.amazonaws.com",
            "public_ip": "44.230.244.1",
            "public_ipv4_pool": "amazon",
            "tags": null,
            "tags_all": {},
            "timeouts": null,
            "vpc": true
          },
     
      ]
    },
    {
      "mode": "managed",
      "type": "aws_s3_bucket",
      "name": "mys3",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "acceleration_status": "",
            "acl": null,
            "arn": "arn:aws:s3:::rkrath-attribute-demo-001",
            "bucket": "rkrath-attribute-demo-001",
            "bucket_domain_name": "rkrath-attribute-demo-001.s3.amazonaws.com",
            "bucket_prefix": null,
            "bucket_regional_domain_name": "rkrath-attribute-demo-001.s3.us-west-2.amazonaws.com",
            "cors_rule": [],
            "force_destroy": false,
            "grant": [
              {
                "id": "450484c4553b45e1e50cb00e8732e24440f1cf20afb20812279e1c872615dfb1",
                "permissions": [
                  "FULL_CONTROL"
                ],
                "type": "CanonicalUser",
                "uri": ""
              }
            ],
            
 ```

Referencing Cross-Account Resource Attributes
---------------------------------------------

![image](https://user-images.githubusercontent.com/53966749/207613908-da60cf85-b78b-4608-a32e-68fa79a2c38c.png)

example-1 EIP with EC2 instances
--------------------------------

```
provider "aws" {
  region     = "us-west-2"
  access_key = "PUT-YOUR-ACCESS-KEY-HERE"
  secret_key = "PUT-YOUR-SECRET-KEY-HERE"
}



resource "aws_instance" "myec2" {
   ami = "ami-082b5a644766e0e6f"
   instance_type = "t2.micro"
}

resource "aws_eip" "lb" {
  vpc      = true
}

resource "aws_eip_association" "eip_assoc" {
  instance_id   = aws_instance.myec2.id
  allocation_id = aws_eip.lb.id
}


```

example-2 EIP and sequrity group
--------------------------------

```

provider "aws" {
  region     = "us-west-2"
  access_key = "PUT-YOUR-ACCESS-KEY-HERE"
  secret_key = "PUT-YOUR-SECRET-KEY-HERE"
}


resource "aws_security_group" "allow_tls" {
  name        = "kplabs-security-group"
  vpc_id      = <ADD-YOUR-VPC-ID-HERE>

  ingress {
    from_port   = 443
    to_port     = 443
    protocol    = "tcp"
    #cidr_blocks = ["${aws_eip.lb.public_ip}/32"]
    cidr_blocks = [aws_eip.lb.public_ip/32]
  }
}

```
Terraform Variables
====================

```
provider "aws" {
  region     = "us-west-2"
  access_key = "AKIefweefwef"
  secret_key = "hMgDS4SGroJzweffewfwef"
}

resource "aws_security_group" "var_demo" {
  name        = "kplabs-variables"

  ingress {
    from_port   = 443
    to_port     = 443
    protocol    = "tcp"
    cidr_blocks = [var.vpn_ip]
  }

  ingress {
    from_port   = 80
    to_port     = 80
    protocol    = "tcp"
    cidr_blocks = [var.vpn_ip]
  }

  ingress {
    from_port   = 53
    to_port     = 53
    protocol    = "tcp"
    cidr_blocks = [var.vpn_ip]
  }
}

variableee.tf
--------------
variable "vpn_ip" {
  default = "116.50.30.50/32"
}

terraform plan
--------------
  # aws_security_group.var_demo will be created
  + resource "aws_security_group" "var_demo" {
      + arn                    = (known after apply)
      + description            = "Managed by Terraform"
      + egress                 = (known after apply)
      + id                     = (known after apply)
      + ingress                = [
          + {
              + cidr_blocks      = [
                  + "116.50.30.50/32",
                ]
              + description      = ""
              + from_port        = 443
              + ipv6_cidr_blocks = []
              + prefix_list_ids  = []
              + protocol         = "tcp"
              + security_groups  = []
              + self             = false
              + to_port          = 443
            },
          + {
              + cidr_blocks      = [
                  + "116.50.30.50/32",
                ]
              + description      = ""
              + from_port        = 53
              + ipv6_cidr_blocks = []
              + prefix_list_ids  = []
              + protocol         = "tcp"
              + security_groups  = []
              + self             = false
              + to_port          = 53
            },
          + {
              + cidr_blocks      = [
                  + "116.50.30.50/32",
                ]
              + description      = ""
              + from_port        = 80
              + ipv6_cidr_blocks = []
              + prefix_list_ids  = []
              + protocol         = "tcp"
              + security_groups  = []
              + self             = false
              + to_port          = 80
            },
        ]
      + name                   = "kplabs-variables"
      + name_prefix            = (known after apply)
      + owner_id               = (known after apply)
      + revoke_rules_on_delete = false
      + tags_all               = (known after apply)
      + vpc_id                 = (known after apply)
    }

Plan: 1 to add, 0 to change, 0 to destroy.


```
